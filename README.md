# 問題
1. **最重要 = エイム操作(Rスティックの制御)がカクカクで操作困難**
2. 約12フレーム(0.2秒)程度の遅延が存在
3. マウスホイールの制御が僅かに不安定
4. pygameとpynputが共存しているため、バックグラウンドなどでも操作が反映される。pygameに統一したい。

# はじめに

このプロジェクトは、Bluetooth接続を通じて、PCに入力されたキーボードマウスを任天堂コントローラーとして変換するプロジェクトです。

# 必要なもの

* Bluetooth USBアダプター (CSR4.0チップセット推奨)
* Python 3.x
* pygame,pynput

# セットアップ方法

1.  **ライブラリのインストール**

    プロジェクトの依存関係をインストールするために、`requirements.txt`を実行します。

    ```bash
    pip install -r requirements.txt
    ```

2.  **Bluetooth USBアダプターのセットアップ**
    Bluetooth USBアダプターに、`Zadig`を使用して`WinUSB`ドライバーを適用する必要があります。

    * `Zadig`を以下のURLからダウンロードします。
        `https://zadig.akeo.ie/`
    * `Zadig`を起動し、オプションから`List All Devices`を選択します。
    * ドロップダウンリストから、使用するBluetooth USBアダプターを選択します。
    * ドライバーの選択肢として`WinUSB`を選択し、`Replace Driver`をクリックします。
3.  **アプリケーションの起動**
    * Switchの`コントローラ`から、`持ち方/順番を変える`を選択
    * エクスプローラーから`nxPeripheral.py`を起動します。
    * プリセットを数字で選択してエンターします。
    * デフォルトの操作設定が表示されますので、確認できたらエンターを押します。

4.  **キー設定やプリセットによる拡張**
    **キー設定**とは、コントローラに変換する際のキーボード、マウス入力を設定します。
    **プリセット**とは、状況に応じてキー設定を使い分けるために任意のキーを押すことでキー設定を変更できるようにします。
    `nxPeripheralKeyConfig.py`を利用することで、WASDによるLスティックとマウスによるRスティックの操作以外を自由に制御できます。
    また、自作したキー設定をまとめて自作のプリセットも作成できます。
    **プリセット作成のとき、最初に入力したキー設定がデフォルトのキー設定となります。**

# Bluetoothとして送信するための.dll開発者
https://github.com/mizuyoukanao/btstack

> [!CAUTION]

> 安物のゴミみたいなアダプタ使ったら、接続はできたけどすぐ入力キレました。
